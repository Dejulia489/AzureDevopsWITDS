:root {
  --color-bg: #f4f5f7;
  --color-surface: #ffffff;
  --color-primary: #0078d4;
  --color-primary-hover: #106ebe;
  --color-primary-light: #deecf9;
  --color-danger: #d13438;
  --color-danger-hover: #a4262c;
  --color-success: #107c10;
  --color-warning: #ff8c00;
  --color-text: #323130;
  --color-text-secondary: #605e5c;
  --color-border: #e1dfdd;
  --color-border-strong: #c8c6c4;
  --color-diff-added: #dff6dd;
  --color-diff-removed: #fdd;
  --color-diff-changed: #fff4ce;
  --radius: 4px;
  --shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.15);
  --font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: var(--font);
  background: var(--color-bg);
  color: var(--color-text);
  line-height: 1.5;
}

/* Layout */
.app { display: flex; flex-direction: column; min-height: 100vh; }
.app-header {
  background: var(--color-primary);
  color: #fff;
  padding: 12px 24px;
  display: flex;
  align-items: center;
  gap: 16px;
  box-shadow: var(--shadow);
  z-index: 100;
}
.app-header h1 { font-size: 18px; font-weight: 600; }
.app-nav { display: flex; gap: 4px; margin-left: auto; }
.app-nav button {
  background: transparent;
  color: rgba(255,255,255,0.85);
  border: none;
  padding: 8px 16px;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 14px;
  font-family: var(--font);
  transition: background 0.15s, color 0.15s;
}
.app-nav button:hover { background: rgba(255,255,255,0.15); color: #fff; }
.app-nav button.active { background: rgba(255,255,255,0.25); color: #fff; font-weight: 600; }

.app-content { flex: 1; padding: 24px; max-width: 1400px; width: 100%; margin: 0 auto; }

/* Cards */
.card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  padding: 20px;
  box-shadow: var(--shadow);
}
.card + .card { margin-top: 16px; }
.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--color-border);
}
.card-header h2 { font-size: 16px; font-weight: 600; }
.card-header h3 { font-size: 14px; font-weight: 600; }

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 16px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 13px;
  font-family: var(--font);
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
}
.btn:hover { background: #f3f2f1; border-color: var(--color-border-strong); }
.btn:disabled { opacity: 0.5; cursor: not-allowed; }
.btn-primary { background: var(--color-primary); color: #fff; border-color: var(--color-primary); }
.btn-primary:hover { background: var(--color-primary-hover); }
.btn-danger { background: var(--color-danger); color: #fff; border-color: var(--color-danger); }
.btn-danger:hover { background: var(--color-danger-hover); }
.btn-success { background: var(--color-success); color: #fff; border-color: var(--color-success); }
.btn-sm { padding: 4px 10px; font-size: 12px; }
.btn-group { display: flex; gap: 8px; flex-wrap: wrap; }

/* Forms */
.form-group { margin-bottom: 14px; }
.form-group label { display: block; font-size: 13px; font-weight: 600; margin-bottom: 4px; color: var(--color-text-secondary); }
.form-group input, .form-group select, .form-group textarea {
  width: 100%;
  padding: 6px 10px;
  border: 1px solid var(--color-border-strong);
  border-radius: var(--radius);
  font-size: 13px;
  font-family: var(--font);
  transition: border-color 0.15s;
}
.form-group input:focus, .form-group select:focus, .form-group textarea:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 1px var(--color-primary);
}
.form-row { display: flex; gap: 12px; }
.form-row .form-group { flex: 1; }

/* Tables */
.table-wrap { overflow-x: auto; }
table { width: 100%; border-collapse: collapse; font-size: 13px; }
th, td { padding: 8px 12px; text-align: left; border-bottom: 1px solid var(--color-border); }
th { font-weight: 600; color: var(--color-text-secondary); background: #faf9f8; position: sticky; top: 0; }
tr:hover td { background: #faf9f8; }

/* Tags / Badges */
.badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 600;
  line-height: 1.4;
}
.badge-primary { background: var(--color-primary-light); color: var(--color-primary); }
.badge-success { background: #dff6dd; color: var(--color-success); }
.badge-danger { background: #fdd; color: var(--color-danger); }
.badge-warning { background: #fff4ce; color: #835c00; }
.badge-neutral { background: #f3f2f1; color: var(--color-text-secondary); }

/* Diff highlighting */
.diff-added { background: var(--color-diff-added); }
.diff-removed { background: var(--color-diff-removed); }
.diff-changed { background: var(--color-diff-changed); }

/* State category colors */
.state-proposed { color: #8764b8; }
.state-inprogress { color: var(--color-primary); }
.state-resolved { color: var(--color-success); }
.state-completed { color: var(--color-success); }
.state-removed { color: var(--color-danger); }

/* Notifications */
.notification {
  padding: 10px 16px;
  border-radius: var(--radius);
  margin-bottom: 12px;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.notification-info { background: var(--color-primary-light); color: #004578; border: 1px solid #b3d7f2; }
.notification-success { background: #dff6dd; color: #0b6a0b; border: 1px solid #9fd89f; }
.notification-error { background: #fde7e9; color: #a80000; border: 1px solid #f1bbbc; }
.notification-warning { background: #fff4ce; color: #835c00; border: 1px solid #f9e2ae; }

/* Loading */
.spinner {
  display: inline-block;
  width: 16px;
  height: 16px;
  border: 2px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}
.spinner-lg { width: 32px; height: 32px; border-width: 3px; }
@keyframes spin { to { transform: rotate(360deg); } }

.loading-overlay {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 40px;
  color: var(--color-text-secondary);
  font-size: 14px;
}

/* Tabs */
.tabs { display: flex; border-bottom: 2px solid var(--color-border); margin-bottom: 16px; }
.tab {
  padding: 8px 16px;
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 13px;
  font-family: var(--font);
  color: var(--color-text-secondary);
  border-bottom: 2px solid transparent;
  margin-bottom: -2px;
  transition: all 0.15s;
}
.tab:hover { color: var(--color-text); }
.tab.active { color: var(--color-primary); border-bottom-color: var(--color-primary); font-weight: 600; }

/* Comparison grid */
.comparison-grid {
  display: grid;
  gap: 1px;
  background: var(--color-border);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  overflow: hidden;
}
.comparison-grid > * { background: var(--color-surface); padding: 8px 12px; }
.comparison-header { background: #faf9f8; font-weight: 600; font-size: 13px; }

/* Collapsible sections */
.collapsible-header {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  padding: 8px 0;
  user-select: none;
}
.collapsible-header:hover { color: var(--color-primary); }
.collapsible-arrow { transition: transform 0.2s; font-size: 12px; }
.collapsible-arrow.open { transform: rotate(90deg); }

/* Color swatch */
.color-swatch {
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 3px;
  border: 1px solid rgba(0,0,0,0.15);
  vertical-align: middle;
}

/* Modal */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}
.modal {
  background: var(--color-surface);
  border-radius: 6px;
  box-shadow: var(--shadow-lg);
  width: 90%;
  max-width: 600px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
}
.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--color-border);
}
.modal-header h2 { font-size: 16px; }
.modal-body { padding: 20px; overflow-y: auto; flex: 1; }
.modal-footer { padding: 12px 20px; border-top: 1px solid var(--color-border); display: flex; justify-content: flex-end; gap: 8px; }
.modal-close {
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: var(--color-text-secondary);
  padding: 4px;
  line-height: 1;
}

/* Empty state */
.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: var(--color-text-secondary);
}
.empty-state h3 { font-size: 16px; margin-bottom: 8px; color: var(--color-text); }
.empty-state p { font-size: 14px; margin-bottom: 16px; }

/* Scrollable panel */
.scroll-panel { max-height: 400px; overflow-y: auto; }
.scroll-panel-lg { max-height: 600px; }

/* Checkbox / Toggle */
.toggle-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 0;
  border-bottom: 1px solid var(--color-border);
}

/* Field cell layout â€“ keeps badge/label on one line, actions on the next */
.field-cell { display: flex; flex-direction: column; gap: 4px; }
.field-cell-status { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
.field-cell-actions { display: flex; align-items: center; gap: 4px; flex-wrap: wrap; }

/* Info icon button */
.info-icon {
  display: inline-flex; align-items: center; justify-content: center;
  width: 18px; height: 18px; border-radius: 50%;
  border: 1px solid var(--color-border-strong); background: #faf9f8;
  font-size: 11px; font-weight: 700; color: var(--color-text-secondary);
  cursor: pointer; flex-shrink: 0; line-height: 1; position: relative;
}
.info-icon:hover { background: var(--color-primary-light); border-color: var(--color-primary); color: var(--color-primary); }

/* Field detail popover */
.field-popover {
  position: absolute; z-index: 100; left: 0; top: calc(100% + 4px);
  background: #fff; border: 1px solid var(--color-border-strong); border-radius: var(--radius);
  box-shadow: 0 4px 16px rgba(0,0,0,0.12); padding: 10px 14px;
  min-width: 260px; max-width: 360px; font-size: 12px;
}
.field-popover dt { font-weight: 600; color: var(--color-text-secondary); margin-top: 6px; }
.field-popover dt:first-child { margin-top: 0; }
.field-popover dd { margin: 2px 0 0 0; word-break: break-word; }

/* Utility */
.text-secondary { color: var(--color-text-secondary); }
.text-sm { font-size: 12px; }
.text-mono { font-family: 'Consolas', 'Courier New', monospace; font-size: 12px; }
.mt-2 { margin-top: 8px; }
.mt-4 { margin-top: 16px; }
.mb-2 { margin-bottom: 8px; }
.mb-4 { margin-bottom: 16px; }
.gap-2 { gap: 8px; }
.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.flex-1 { flex: 1; }
.flex-wrap { flex-wrap: wrap; }
.truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
